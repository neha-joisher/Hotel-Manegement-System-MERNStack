{"ast":null,"code":"var _jsxFileName = \"/Users/nehajoisher/Desktop/Test/frontend/src/screens/BookingListScreen/bookingListScreen.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport axios from \"axios\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { listBookings } from '../../actions/bookingActions';\nimport Message from '../../components/Message';\nimport Loader from '../../components/Loader';\nimport { LinkContainer } from 'react-router-bootstrap';\nimport { Table, Button } from 'react-bootstrap';\nimport Swal from \"sweetalert2\";\nimport { Tag, Divider } from 'antd'; // import './bookingListScreen.css'\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst BookingListScreen = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  const listAllBookings = useSelector(state => state.listAllBookings);\n  const {\n    loading,\n    error,\n    bookings\n  } = listAllBookings;\n  useEffect(() => {\n    dispatch(listBookings());\n  }, [dispatch]);\n\n  async function cancelBooking(bookingid, roomid) {\n    try {\n      // loading(true);\n      const result = await (await axios.post('/api/booking/cancelbookings', {\n        bookingid,\n        roomid\n      })).data; // loading(false);\n\n      Swal.fire('Congrats', 'Your Room has cancelled succeessfully', 'success').then(result => {\n        window.location.href = '/roomManagement';\n      });\n    } catch (error) {\n      Swal.fire('Oops', 'Something went wrong', 'error').then(result => {\n        window.location.href = '/roomManagement';\n      }); // loading(false)\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Bookings List\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 19\n    }, this), loading ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 31\n    }, this) : error ? /*#__PURE__*/_jsxDEV(Message, {\n      variant: \"danger\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 31\n    }, this) : /*#__PURE__*/_jsxDEV(Table, {\n      striped: true,\n      bordered: true,\n      hover: true,\n      responsive: true,\n      className: \"table-sm\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Booking ID\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 49\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Room Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 49\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"From\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 49\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"To\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 49\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Days Count\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 49\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Total Cost USD\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 49\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Booking Status\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 49\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Cancel the booking\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 49\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 43\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 37\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: bookings.map(book => /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: book.bookingID\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 55\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: book.rooms\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 55\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: book.fromdate\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 55\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: book.todate\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 55\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: Math.round(book.totalDays)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 55\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: book.totalAmount\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 55\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 77,\n                columnNumber: 64\n              }, this), \": \", book.status === 'booked' ? /*#__PURE__*/_jsxDEV(Tag, {\n                color: \"green\",\n                children: \"Confirmed\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 77,\n                columnNumber: 108\n              }, this) : /*#__PURE__*/_jsxDEV(Tag, {\n                color: \"red\",\n                children: \"Cancelled\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 77,\n                columnNumber: 147\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 61\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 55\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center\",\n              children: book.status === 'booked' && /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn-danger text-center\",\n                onClick: () => cancelBooking(book._id, book.roomid),\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 97\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 61\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 55\n          }, this)]\n        }, book._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 49\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 37\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 31\n    }, this)]\n  }, void 0, true);\n};\n\n_s(BookingListScreen, \"XnQM611PNVluTylcIq/Pc1jSkn0=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = BookingListScreen;\nexport default BookingListScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"BookingListScreen\");","map":{"version":3,"names":["React","useEffect","axios","useDispatch","useSelector","listBookings","Message","Loader","LinkContainer","Table","Button","Swal","Tag","Divider","BookingListScreen","dispatch","listAllBookings","state","loading","error","bookings","cancelBooking","bookingid","roomid","result","post","data","fire","then","window","location","href","map","book","bookingID","rooms","fromdate","todate","Math","round","totalDays","totalAmount","status","_id"],"sources":["/Users/nehajoisher/Desktop/Test/frontend/src/screens/BookingListScreen/bookingListScreen.js"],"sourcesContent":["import React, { useEffect } from 'react'\nimport axios from \"axios\";\nimport { useDispatch, useSelector } from 'react-redux'\nimport { listBookings } from '../../actions/bookingActions'\nimport Message from '../../components/Message'\nimport Loader from '../../components/Loader'\nimport { LinkContainer } from 'react-router-bootstrap'\nimport { Table, Button } from 'react-bootstrap'\nimport Swal from \"sweetalert2\";\nimport { Tag, Divider } from 'antd';\n// import './bookingListScreen.css'\n\nconst BookingListScreen = () => {\n\n      const dispatch = useDispatch()\n\n      const listAllBookings = useSelector((state) => state.listAllBookings)\n      const { loading, error, bookings } = listAllBookings\n\n      useEffect(() => {\n            dispatch((listBookings()))\n      }, [dispatch])\n\n\n      async function cancelBooking(bookingid, roomid) {\n\n\n            try {\n                  // loading(true);\n                  const result = await (await axios.post('/api/booking/cancelbookings', { bookingid, roomid })).data\n                  // loading(false);\n                  Swal.fire('Congrats', 'Your Room has cancelled succeessfully', 'success').then(result => {\n                        window.location.href = '/roomManagement'\n                  })\n            } catch (error) {\n                  Swal.fire('Oops', 'Something went wrong', 'error').then(result => {\n                        window.location.href = '/roomManagement'\n                  })\n                  // loading(false)\n            }\n\n      }\n\n      return (\n            <>\n                  <h1>Bookings List</h1>\n                  {\n                        loading ? (\n                              <Loader />\n                        ) : error ? (\n                              <Message variant='danger'>{error}</Message>\n                        ) : (\n                              <Table striped bordered hover responsive className='table-sm'>\n                                    <thead>\n                                          <tr>\n                                                <th>Booking ID</th>\n                                                <th>Room Name</th>\n                                                <th>From</th>\n                                                <th>To</th>\n                                                <th>Days Count</th>\n                                                <th>Total Cost USD</th>\n                                                <th>Booking Status</th>\n                                                <th>Cancel the booking</th>\n                                          </tr>\n                                    </thead>\n                                    <tbody>\n                                          {bookings.map((book) => (\n                                                <tr key={book._id}>\n\n                                                      <td>{book.bookingID}</td>\n                                                      <td>{book.rooms}</td>\n                                                      <td>{book.fromdate}</td>\n                                                      <td>{book.todate}</td>\n                                                      <td>{Math.round(book.totalDays)}</td>\n                                                      <td>{book.totalAmount}</td>\n                                                      <td>\n                                                            <p><b>Status</b>: {book.status === 'booked' ? (<Tag color=\"green\">Confirmed</Tag>) : (<Tag color=\"red\">Cancelled</Tag>)}</p>\n\n                                                      </td>\n                                                      <td>\n                                                            <div className='text-center'>\n                                                                  {book.status === 'booked' && (<button className='btn-danger text-center' onClick={() => cancelBooking(book._id, book.roomid)}>Cancel</button>)}\n                                                            </div>\n                                                      </td>\n                                                </tr>\n                                          ))}\n                                    </tbody>\n                              </Table>\n                        )\n                  }\n            </>\n      )\n}\n\nexport default BookingListScreen\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}