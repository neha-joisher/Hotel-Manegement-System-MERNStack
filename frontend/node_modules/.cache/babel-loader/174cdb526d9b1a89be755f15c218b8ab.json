{"ast":null,"code":"var _jsxFileName = \"/Users/nehajoisher/Desktop/INFO-6150-Web-Design-Final-Project-main/frontend/src/screens/UserRoomBookings/userRoomBookings.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport Swal from 'sweetalert2';\nimport Message from '../../components/Message';\nimport Loader from '../../components/Loader';\nimport { Tag, Divider } from 'antd';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst user = JSON.parse(localStorage.getItem('userInfo'));\n\nconst UserRoomBookings = () => {\n  _s();\n\n  const [mybookings, setmybookings] = useState([]);\n  const [loading, setloading] = useState(false);\n  const [error, seterror] = useState(false); // const [success, setsuccess] = useState(false);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  useEffect(async () => {\n    try {\n      setloading(true);\n      const data = await (await axios.post('/api/booking/userBookings', {\n        userid: JSON.parse(localStorage.getItem('userInfo'))._id\n      })).data;\n      setmybookings(data);\n      setloading(false);\n    } catch (error) {\n      setloading(false);\n      seterror(true);\n    }\n  }, []);\n\n  async function cancelBooking(bookingid, roomid) {\n    try {\n      setloading(true);\n      const result = await (await axios.post('/api/booking/cancelbookings', {\n        bookingid,\n        roomid\n      })).data;\n      setloading(false);\n      Swal.fire('Congrats', 'Your Room has cancelled succeessfully', 'success').then(result => {\n        window.location.href = '/profile';\n      });\n    } catch (error) {\n      Swal.fire('Oops', 'Something went wrong', 'error').then(result => {\n        window.location.href = '/profile';\n      });\n      setloading(false);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: loading ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }, this) : error ? /*#__PURE__*/_jsxDEV(Message, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }, this) : mybookings.map(booking => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-6 my-auto\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bs m-1 p-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                children: booking.room\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 67,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Booking ID : \", booking.bookingID]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 69,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Transaction ID : \", booking.transactionId]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 70,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"Check In : \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 72,\n                  columnNumber: 23\n                }, this), booking.fromdate]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 71,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"Check Out : \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 76,\n                  columnNumber: 23\n                }, this), booking.todate]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"Amount : \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 80,\n                  columnNumber: 23\n                }, this), \" \", booking.totalAmount]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 79,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"Status\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 83,\n                  columnNumber: 23\n                }, this), \" :\", ' ', booking.status === 'booked' ? /*#__PURE__*/_jsxDEV(Tag, {\n                  color: \"green\",\n                  children: \"Confirmed\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 85,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(Tag, {\n                  color: \"red\",\n                  children: \"Cancelled\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 87,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-right\",\n                children: booking.status === 'booked' && /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-outline-danger\",\n                  onClick: () => cancelBooking(booking._id, booking.roomid) // cancelBooking(booking.bookingID, booking.roomid)\n                  ,\n                  children: \"Cancel Booking\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 92,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 90,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 15\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(UserRoomBookings, \"Twlbs5U7SSeuG072G+A1jjGdzhU=\");\n\n_c = UserRoomBookings;\nexport default UserRoomBookings;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserRoomBookings\");","map":{"version":3,"names":["React","useEffect","useState","axios","Swal","Message","Loader","Tag","Divider","user","JSON","parse","localStorage","getItem","UserRoomBookings","mybookings","setmybookings","loading","setloading","error","seterror","data","post","userid","_id","cancelBooking","bookingid","roomid","result","fire","then","window","location","href","map","booking","room","bookingID","transactionId","fromdate","todate","totalAmount","status"],"sources":["/Users/nehajoisher/Desktop/INFO-6150-Web-Design-Final-Project-main/frontend/src/screens/UserRoomBookings/userRoomBookings.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport axios from 'axios'\nimport Swal from 'sweetalert2'\nimport Message from '../../components/Message'\nimport Loader from '../../components/Loader'\nimport { Tag, Divider } from 'antd'\n\n\nconst user = JSON.parse(localStorage.getItem('userInfo'))\n\nconst UserRoomBookings = () => {\n  const [mybookings, setmybookings] = useState([])\n  const [loading, setloading] = useState(false)\n  const [error, seterror] = useState(false)\n  // const [success, setsuccess] = useState(false);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(async () => {\n    try {\n      setloading(true)\n      const data = await (\n        await axios.post('/api/booking/userBookings', {\n          userid: JSON.parse(localStorage.getItem('userInfo'))._id,\n        })\n      ).data\n      setmybookings(data)\n      setloading(false)\n    } catch (error) {\n      setloading(false)\n      seterror(true)\n    }\n  }, [])\n\n  async function cancelBooking(bookingid, roomid) {\n    try {\n      setloading(true)\n      const result = await (\n        await axios.post('/api/booking/cancelbookings', { bookingid, roomid })\n      ).data\n      setloading(false)\n      Swal.fire(\n        'Congrats',\n        'Your Room has cancelled succeessfully',\n        'success'\n      ).then((result) => {\n        window.location.href = '/profile'\n      })\n    } catch (error) {\n      Swal.fire('Oops', 'Something went wrong', 'error').then((result) => {\n        window.location.href = '/profile'\n      })\n      setloading(false)\n    }\n  }\n  return (\n    <>\n      <div>\n        {loading ? (\n          <Loader />\n        ) : error ? (\n          <Message />\n        ) : (\n          mybookings.map((booking) => {\n            return (\n              <div className='row'>\n                <div className='col-md-6 my-auto'>\n                  <div className='bs m-1 p-2'>\n                    <h1>{booking.room}</h1>\n                    {/* <p>BookingId : {booking._id}</p> */}\n                    <p>Booking ID : {booking.bookingID}</p>\n                    <p>Transaction ID : {booking.transactionId}</p>\n                    <p>\n                      <b>Check In : </b>\n                      {booking.fromdate}\n                    </p>\n                    <p>\n                      <b>Check Out : </b>\n                      {booking.todate}\n                    </p>\n                    <p>\n                      <b>Amount : </b> {booking.totalAmount}\n                    </p>\n                    <p>\n                      <b>Status</b> :{' '}\n                      {booking.status === 'booked' ? (\n                        <Tag color='green'>Confirmed</Tag>\n                      ) : (\n                        <Tag color='red'>Cancelled</Tag>\n                      )}\n                    </p>\n                    <div className='text-right'>\n                      {booking.status === 'booked' && (\n                        <button\n                          className='btn btn-outline-danger'\n                          onClick={() =>\n                            cancelBooking(booking._id, booking.roomid)\n                            // cancelBooking(booking.bookingID, booking.roomid)\n                          }\n                        >\n                          Cancel Booking\n                        </button>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )\n          })\n        )}\n      </div>\n    </>\n  )\n}\n\nexport default UserRoomBookings\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}