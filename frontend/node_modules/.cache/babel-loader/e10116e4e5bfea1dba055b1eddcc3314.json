{"ast":null,"code":"var _jsxFileName = \"/Users/nehajoisher/Desktop/INFO-6150-Web-Design-Final-Project-main/frontend/src/screens/UserTableReservations/UserTableReservations.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport Swal from \"sweetalert2\";\nimport { Tag, Divider } from 'antd';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst user = JSON.parse(localStorage.getItem('userInfo'));\n\nconst UserTableReservations = () => {\n  _s();\n\n  const [myReservations, setMyReservations] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(false);\n  useEffect(async () => {\n    try {\n      setLoading(true);\n      const data = await (await axios.post('/api/tableBooking/tableReservations', {\n        userid: JSON.parse(localStorage.getItem('userInfo'))._id\n      })).data;\n      setMyReservations(data);\n      setLoading(false);\n    } catch (error) {\n      setLoading(false);\n      setError(true);\n    }\n  }, []);\n\n  async function cancelReservation(bookingid, restaurantid) {\n    try {\n      setLoading(true);\n      const result = await (await axios.post('/api/tableBooking/cancelReservation', {\n        bookingid\n      })).data;\n      setLoading(false);\n      Swal.fire('Congrats', 'Your Table Reservation has cancelled', 'success').then(result => {\n        window.location.href = '/profile';\n      });\n    } catch (error) {\n      Swal.fire('Oops', 'Something went wrong', 'error').then(result => {\n        window.location.href = '/profile';\n      });\n      setLoading(false);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: loading ? /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 21\n      }, this) : error ? /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Error...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 21\n      }, this) : myReservations.map(reserve => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row justify-content-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-6 my-auto\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bs m-1 p-2 \",\n              children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                children: /*#__PURE__*/_jsxDEV(\"center\", {\n                  children: \"View your current reservations...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 58,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 58,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 59,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"center\", {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: /*#__PURE__*/_jsxDEV(\"b\", {\n                    children: [\"Restaurant Name : \", reserve.restaurantName]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 62,\n                    columnNumber: 44\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 62,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: /*#__PURE__*/_jsxDEV(\"b\", {\n                    children: [\"Date : \", reserve.date]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 63,\n                    columnNumber: 44\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 63,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                    children: \"Status\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 64,\n                    columnNumber: 44\n                  }, this), \" : \", reserve.status === 'booked' ? /*#__PURE__*/_jsxDEV(Tag, {\n                    color: \"green\",\n                    children: \"Confirmed\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 64,\n                    columnNumber: 92\n                  }, this) : /*#__PURE__*/_jsxDEV(Tag, {\n                    color: \"red\",\n                    children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                      class: \"fa fa-times\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 64,\n                      columnNumber: 148\n                    }, this), \"Cancelled\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 64,\n                    columnNumber: 131\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 64,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 60,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-right\",\n                children: reserve.status === 'booked' && /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-outline-danger\",\n                  style: {\n                    borderRadius: '20px'\n                  },\n                  onClick: () => cancelReservation(reserve._id, reserve.restaurantid),\n                  children: \"Cancel Booking\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 68,\n                  columnNumber: 74\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 67,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 32\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n};\n\n_s(UserTableReservations, \"GrF7Ag+7jHcbP/gO48cb+8WELmo=\");\n\n_c = UserTableReservations;\nexport default UserTableReservations;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserTableReservations\");","map":{"version":3,"names":["React","useEffect","useState","axios","Swal","Tag","Divider","user","JSON","parse","localStorage","getItem","UserTableReservations","myReservations","setMyReservations","loading","setLoading","error","setError","data","post","userid","_id","cancelReservation","bookingid","restaurantid","result","fire","then","window","location","href","map","reserve","restaurantName","date","status","borderRadius"],"sources":["/Users/nehajoisher/Desktop/INFO-6150-Web-Design-Final-Project-main/frontend/src/screens/UserTableReservations/UserTableReservations.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport axios from 'axios'\nimport Swal from \"sweetalert2\";\nimport { Tag, Divider } from 'antd';\n\nconst user = JSON.parse(localStorage.getItem('userInfo'))\n\nconst UserTableReservations = () => {\n\n    const [myReservations, setMyReservations] = useState([])\n    const [loading, setLoading] = useState(false)\n    const [error, setError] = useState(false)\n\n    useEffect(async () => {\n        try {\n            setLoading(true)\n            const data = await (\n                await axios.post('/api/tableBooking/tableReservations', {\n                    userid: JSON.parse(localStorage.getItem('userInfo'))._id,\n                })\n            ).data\n            setMyReservations(data)\n            setLoading(false)\n        } catch (error) {\n            setLoading(false)\n            setError(true)\n        }\n    }, [])\n\n    async function cancelReservation(bookingid, restaurantid) {\n\n        try {\n            setLoading(true)\n            const result = await (await axios.post('/api/tableBooking/cancelReservation', { bookingid })).data\n            setLoading(false)\n            Swal.fire('Congrats', 'Your Table Reservation has cancelled', 'success').then(result => {\n                window.location.href = '/profile'\n            })\n        } catch (error) {\n            Swal.fire('Oops', 'Something went wrong', 'error').then(result => {\n                window.location.href = '/profile'\n            })\n            setLoading(false)\n        }\n    }\n    return (\n        <>\n            <div>\n                {loading ? (\n                    <h1>loading...</h1>\n                ) : error ? (\n                    <h1>Error...</h1>\n                ) : (\n                    myReservations.map(reserve => {\n                        return <div className=\"row justify-content-center\">\n                            <div className=\"col-md-6 my-auto\">\n                                <div className='bs m-1 p-2 '>\n                                    <h1><center>View your current reservations...</center></h1>\n                                    <br />\n                                    <center>\n                                        {/* <p><b>ReservationId : {reserve._id}</b></p> */}\n                                        <p><b>Restaurant Name : {reserve.restaurantName}</b></p>\n                                        <p><b>Date : {reserve.date}</b></p>\n                                        <p><b>Status</b> : {reserve.status === 'booked' ? (<Tag color=\"green\">Confirmed</Tag>) : (<Tag color=\"red\"><i class=\"fa fa-times\" ></i>\n                                            Cancelled</Tag>)}</p>\n                                    </center>\n                                    <div className='text-right'>\n                                        {reserve.status === 'booked' && (<button className='btn btn-outline-danger' style={{ borderRadius: '20px' }} onClick={() => cancelReservation(reserve._id, reserve.restaurantid)}>Cancel Booking</button>)}\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    })\n                )}\n            </div>\n        </>\n    )\n}\n\nexport default UserTableReservations\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,aAAjB;AACA,SAASC,GAAT,EAAcC,OAAd,QAA6B,MAA7B;;;AAEA,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,CAAb;;AAEA,MAAMC,qBAAqB,GAAG,MAAM;EAAA;;EAEhC,MAAM,CAACC,cAAD,EAAiBC,iBAAjB,IAAsCZ,QAAQ,CAAC,EAAD,CAApD;EACA,MAAM,CAACa,OAAD,EAAUC,UAAV,IAAwBd,QAAQ,CAAC,KAAD,CAAtC;EACA,MAAM,CAACe,KAAD,EAAQC,QAAR,IAAoBhB,QAAQ,CAAC,KAAD,CAAlC;EAEAD,SAAS,CAAC,YAAY;IAClB,IAAI;MACAe,UAAU,CAAC,IAAD,CAAV;MACA,MAAMG,IAAI,GAAG,MAAM,CACf,MAAMhB,KAAK,CAACiB,IAAN,CAAW,qCAAX,EAAkD;QACpDC,MAAM,EAAEb,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,EAA6CW;MADD,CAAlD,CADS,EAIjBH,IAJF;MAKAL,iBAAiB,CAACK,IAAD,CAAjB;MACAH,UAAU,CAAC,KAAD,CAAV;IACH,CATD,CASE,OAAOC,KAAP,EAAc;MACZD,UAAU,CAAC,KAAD,CAAV;MACAE,QAAQ,CAAC,IAAD,CAAR;IACH;EACJ,CAdQ,EAcN,EAdM,CAAT;;EAgBA,eAAeK,iBAAf,CAAiCC,SAAjC,EAA4CC,YAA5C,EAA0D;IAEtD,IAAI;MACAT,UAAU,CAAC,IAAD,CAAV;MACA,MAAMU,MAAM,GAAG,MAAM,CAAC,MAAMvB,KAAK,CAACiB,IAAN,CAAW,qCAAX,EAAkD;QAAEI;MAAF,CAAlD,CAAP,EAAyEL,IAA9F;MACAH,UAAU,CAAC,KAAD,CAAV;MACAZ,IAAI,CAACuB,IAAL,CAAU,UAAV,EAAsB,sCAAtB,EAA8D,SAA9D,EAAyEC,IAAzE,CAA8EF,MAAM,IAAI;QACpFG,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,UAAvB;MACH,CAFD;IAGH,CAPD,CAOE,OAAOd,KAAP,EAAc;MACZb,IAAI,CAACuB,IAAL,CAAU,MAAV,EAAkB,sBAAlB,EAA0C,OAA1C,EAAmDC,IAAnD,CAAwDF,MAAM,IAAI;QAC9DG,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,UAAvB;MACH,CAFD;MAGAf,UAAU,CAAC,KAAD,CAAV;IACH;EACJ;;EACD,oBACI;IAAA,uBACI;MAAA,UACKD,OAAO,gBACJ;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QADI,GAEJE,KAAK,gBACL;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QADK,GAGLJ,cAAc,CAACmB,GAAf,CAAmBC,OAAO,IAAI;QAC1B,oBAAO;UAAK,SAAS,EAAC,4BAAf;UAAA,uBACH;YAAK,SAAS,EAAC,kBAAf;YAAA,uBACI;cAAK,SAAS,EAAC,aAAf;cAAA,wBACI;gBAAA,uBAAI;kBAAA;gBAAA;kBAAA;kBAAA;kBAAA;gBAAA;cAAJ;gBAAA;gBAAA;gBAAA;cAAA,QADJ,eAEI;gBAAA;gBAAA;gBAAA;cAAA,QAFJ,eAGI;gBAAA,wBAEI;kBAAA,uBAAG;oBAAA,iCAAsBA,OAAO,CAACC,cAA9B;kBAAA;oBAAA;oBAAA;oBAAA;kBAAA;gBAAH;kBAAA;kBAAA;kBAAA;gBAAA,QAFJ,eAGI;kBAAA,uBAAG;oBAAA,sBAAWD,OAAO,CAACE,IAAnB;kBAAA;oBAAA;oBAAA;oBAAA;kBAAA;gBAAH;kBAAA;kBAAA;kBAAA;gBAAA,QAHJ,eAII;kBAAA,wBAAG;oBAAA;kBAAA;oBAAA;oBAAA;oBAAA;kBAAA,QAAH,SAAoBF,OAAO,CAACG,MAAR,KAAmB,QAAnB,gBAA+B,QAAC,GAAD;oBAAK,KAAK,EAAC,OAAX;oBAAA;kBAAA;oBAAA;oBAAA;oBAAA;kBAAA,QAA/B,gBAAsE,QAAC,GAAD;oBAAK,KAAK,EAAC,KAAX;oBAAA,wBAAiB;sBAAG,KAAK,EAAC;oBAAT;sBAAA;sBAAA;sBAAA;oBAAA,QAAjB;kBAAA;oBAAA;oBAAA;oBAAA;kBAAA,QAA1F;gBAAA;kBAAA;kBAAA;kBAAA;gBAAA,QAJJ;cAAA;gBAAA;gBAAA;gBAAA;cAAA,QAHJ,eAUI;gBAAK,SAAS,EAAC,YAAf;gBAAA,UACKH,OAAO,CAACG,MAAR,KAAmB,QAAnB,iBAAgC;kBAAQ,SAAS,EAAC,wBAAlB;kBAA2C,KAAK,EAAE;oBAAEC,YAAY,EAAE;kBAAhB,CAAlD;kBAA4E,OAAO,EAAE,MAAMd,iBAAiB,CAACU,OAAO,CAACX,GAAT,EAAcW,OAAO,CAACR,YAAtB,CAA5G;kBAAA;gBAAA;kBAAA;kBAAA;kBAAA;gBAAA;cADrC;gBAAA;gBAAA;gBAAA;cAAA,QAVJ;YAAA;cAAA;cAAA;cAAA;YAAA;UADJ;YAAA;YAAA;YAAA;UAAA;QADG;UAAA;UAAA;UAAA;QAAA,QAAP;MAkBH,CAnBD;IANR;MAAA;MAAA;MAAA;IAAA;EADJ,iBADJ;AAgCH,CAtED;;GAAMb,qB;;KAAAA,qB;AAwEN,eAAeA,qBAAf"},"metadata":{},"sourceType":"module"}